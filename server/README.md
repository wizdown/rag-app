# Supported APIs

Here are the curl commands to interact with the /ingest and /ask endpoints for your RAG server. You can run these commands from your terminal.

## 1. Ingesting Data (/ingest)
This command sends a POST request to the /ingest endpoint to process and store a new data source. The content is embedded and stored in a new collection named apollo_docs.
```
curl -X 'POST' \
  'http://localhost:8000/ingest' \
  -H 'Content-Type: application/json' \
  -d '{
    "collection_name": "apollo_docs",
    "content": "The Apollo program, also known as Project Apollo, was the third United States human spaceflight program carried out by the National Aeronautics and Space Administration (NASA), which succeeded in preparing and landing the first humans on the Moon from 1968 to 1972."
}'
```

Expected Response:

```
{
  "message": "Data ingested successfully.",
  "collection_name": "apollo_docs",
  "documents_added": 1
}
```

## 2. Asking a Question (/ask)
This command sends a POST request to the /ask endpoint to ask a question against the data source you just ingested. It specifies the collection_name to query and the question to ask.

```
curl -X 'POST' \
  'http://localhost:8000/ask' \
  -H 'Content-Type: application/json' \
  -d '{
    "collection_name": "apollo_docs",
    "question": "What was the timeframe of the Apollo program?"
}'
```

Expected Response:
The response will contain the answer generated by the RAG chain.

```
{
  "answer": "The Apollo program was carried out from 1968 to 1972."
}
```


## 3. List Available Collections (/collections)
This command sends a GET request to the /collections endpoint. It does not require a request body.

```
curl -X 'GET' 'http://localhost:8000/collections'
```

Expected Response:

If you have ingested the apollo_docs collection, the response will be a JSON array containing its name.
```
[
  "apollo_docs"
]
```
If no collections have been ingested yet, you will receive an empty array:
```
[]
```

## 4. Delete a Collection
This command sends a DELETE request to the /collections/{collection_name} endpoint. You need to replace {collection_name} in the URL with the actual name of the collection you want to delete.

For example, to delete the apollo_docs collection:
```
curl -X 'DELETE' 'http://localhost:8000/collections/apollo_docs' -v
```
Note: I've added the -v (verbose) flag so you can see the ```HTTP/1.1 204 No Content``` status in the response, confirming the successful deletion.

Expected Response:

If the collection exists and is deleted successfully, the server will respond with an ```HTTP 204 No Content status code``` and an empty body.

If the collection does not exist, the server will respond with an HTTP 404 Not Found status code and a JSON body like this:
```
{
  "detail": "Collection 'apollo_docs' not found or could not be deleted."
}
```
---

# Backend Setup Instructions on Local Machine

## 1. Create a Virtual Environment

It's recommended to use a virtual environment to manage dependencies. Run the following command in your terminal:

```
python3 -m venv venv
```

## 2. Activate the Virtual Environment

```
source venv/bin/activate
```

## 3. Install Dependencies

Once the virtual environment is activated, install the required dependencies:

```
pip3 install -r requirements.txt
```

## 4. Deactivate the Virtual Environment

When you're done working, you can deactivate the virtual environment with:

```
deactivate
```

---

**Note:**
- Do not commit the `venv/` directory to version control. It is machine-specific and should be recreated by each developer.
- If you add new dependencies, run `pip3 freeze > requirements.txt` to update the list for others. 